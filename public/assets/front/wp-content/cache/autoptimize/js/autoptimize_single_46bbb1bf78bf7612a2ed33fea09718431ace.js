var $=jQuery;$(document).ready(function(){drawBeacon(88.5,78,'australia','Australia','left');drawBeacon(97,90,'nz','New Zealand','left');drawBeacon(45.5,18,'uk','United Kingdom','uk');drawBeacon(15,31,'usa','United States','usa');drawBeacon(16,15,'canada','Canada','canada');drawDetails('australia','Australia');drawDetails('nz','New Zealand');drawDetails('uk','United Kingdom');drawDetails('usa','United States');drawDetails('canada','Canada');$("#covid-destination a").click(function(e){e.preventDefault();if($(this).text()!=="Select"){$(".destination-selected").attr("data-value",$(this).attr("data-value"));$(".destination-selected").text($(this).text());$("#covid-destination").css("pointer-events","none");window.scrollTo(0,680);$beacon_top_pos=$(".covid-beacon#"+$(this).attr("data-value")).css("top").replace("px","");$beacon_left_pos=$(".covid-beacon#"+$(this).attr("data-value")).css("left").replace("px","");if($(window).width()<=480){$x_center=$(".destinations-map > div").width()/1.75;$y_center=$(".destinations-map > div").height()/2.00;}else{$x_center=$(".destinations-map > div").width()/2.75;$y_center=$(".destinations-map > div").height()/2.25;}
$x=$x_center-$beacon_left_pos;$y=$y_center-$beacon_top_pos;$(".covid-beacon text, .covid-beacon .b1").css("pointer-events","none");var tl=new TimelineMax();tl.to($(".covid-beacon .p1"),0.3,{autoAlpha:0});tl.to($(".covid-beacon text"),0.3,{autoAlpha:0},"-=0.3");tl.to($(".covid-beacon .b1"),0.3,{autoAlpha:0},"-=0.3");if($(window).width()>480){tl.to($(".ct-dropdown"),0.3,{autoAlpha:0},"-=0.3");}
tl.to($(".destinations-map > div > div"),1,{x:$x,y:$y});tl.to($(".destinations-map > div"),1,{scale:2},"-=1");if($(window).width()>480&&$(window).width()<1280){tl.to($("#info_"+$(".covid-beacon#"+$(this).attr("data-value")+" text").text().replace(" ","").toLowerCase()),1,{x:-30,ease:Power3.easeOut},"-=1");}
if($(window).width()>=1280){tl.to($("#info_"+$(".covid-beacon#"+$(this).attr("data-value")+" text").text().replace(" ","").toLowerCase()),1,{x:-160,ease:Power3.easeOut},"-=1");}
if($(window).width()<=480){$(".mob-country-dropdown").hide();$(".mobile-border-details-inner").hide();$(".border-details-mobile").css("max-height",1500);$("#info_"+$(this).text().replace(" ","").toLowerCase()).show();}
tl.set($(".covid-beacon#"+$(this).attr("data-value")+" .b1"),{attr:{r:0}});tl.set($(".covid-beacon#"+$(this).attr("data-value")+" .b2"),{attr:{r:0}});tl.set($(".covid-beacon#"+$(this).attr("data-value")+" .b3"),{attr:{r:0}});tl.set($(".covid-beacon#"+$(this).attr("data-value")+" .b4"),{attr:{r:0}});if($(window).width()<=480){tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b1"),0.5,{attr:{r:3},autoAlpha:1});tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b2"),0.5,{attr:{r:15}},"-=0.5");tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b3"),0.5,{attr:{r:26}},"-=0.5");tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b4"),0.5,{attr:{r:38}},"-=0.5");}else{tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b1"),0.5,{attr:{r:9},autoAlpha:1});tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b2"),0.5,{attr:{r:22}},"-=0.5");tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b3"),0.5,{attr:{r:41}},"-=0.5");tl.to($(".covid-beacon#"+$(this).attr("data-value")+" .b4"),0.5,{attr:{r:60}},"-=0.5");}
pref=$(this).attr("data-value");$(".hideDetails").css("width","100%");}
type="dropdown";});$hideDetails='<div class="hideDetails"></div>';$("body").append($hideDetails);$(".hideDetails").bind("click",function(e){$(".close-details#"+pref).click();console.log(pref);});if(window.location.hash=="#australia"){$("#covid-destination a[data-value='australia']").click();}
if(window.location.hash=="#canada"){$("#covid-destination a[data-value='canada']").click();}
if(window.location.hash=="#nz"||window.location.hash=="#new-zealand"){$("#covid-destination a[data-value='nz']").click();}
if(window.location.hash=="#uk"||window.location.hash=="#united-kingdom"){$("#covid-destination a[data-value='uk']").click();}
if(window.location.hash=="#usa"||window.location.hash=="#united-states"||window.location.hash=="#united-states-of-america"){$("#covid-destination a[data-value='usa']").click();}
function drawBeacon(x,y,country,text,direction){$beacon='<svg id='+country+' class="covid-beacon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" style="position: absolute; top: '+y+'%; left: '+x+'%; width: 400px; height: 400px; transform: translate(-50%, -50%);">';$beacon+='<circle class="b4" cx="250" cy="250" r="0" style="fill:none;stroke:#19AD4A;opacity:0.5;isolation:isolate"/>';$beacon+='<circle class="b3" cx="250" cy="250" r="0" style="fill:#19AD4A;stroke:#19AD4A;opacity:0.30000001192092896;isolation:isolate"/>';$beacon+='<circle class="b2" cx="250" cy="250" r="0" style="fill:#19AD4A;stroke:#19AD4A;opacity:0.30000001192092896;isolation:isolate"/>';$beacon+='<circle class="b1" cx="250" cy="250" r="8" style="fill:#19AD4A;stroke:#19AD4A;"/>';if(direction=='left'){$beacon+='<path class="p1" d="M 250 250 l -250 0 z" style="fill:#19AD4A;stroke:#19AD4A;" />';$beacon+='<text x="0" y="245" style="font-family: DM Sans; font-size: 1.25em; color: #293B4A; font-weight: 700; letter-spacing: 0.01em; text-transform: uppercase;">'+text+'</text>';}
if(direction=='uk'){$beacon+='<path class="p1" d="M 250 250 l -65 -100 l -250 0" style="fill: transparent; stroke:#19AD4A;" />';$beacon+='<text x="0" y="145" style="font-family: DM Sans; font-size: 1.25em; color: #293B4A; font-weight: 700; letter-spacing: 0.01em; text-transform: uppercase;">'+text+'</text>';}
if(direction=='canada'){$beacon+='<path class="p1" d="M 250 250 l 80 100 l 100 0" style="fill: transparent; stroke:#19AD4A;" />';$beacon+='<text x="343" y="345" style="font-family: DM Sans; font-size: 1.25em; color: #293B4A; font-weight: 700; letter-spacing: 0.01em; text-transform: uppercase;">'+text+'</text>';}
if(direction=='usa'){$beacon+='<path class="p1" d="M 250 250 l 80 100 l 167 0" style="fill: transparent; stroke:#19AD4A;" />';$beacon+='<text x="349" y="345" style="font-family: DM Sans; font-size: 1.25em; color: #293B4A; font-weight: 700; letter-spacing: 0.01em; text-transform: uppercase;">'+text+'</text>';}
$beacon+='</svg>';$(".destinations-map > div > div").append($beacon);TweenMax.set($(".covid-beacon .p1"),{drawSVG:"100%"});$(".covid-beacon#"+country+" text").bind("mouseenter",function(){hideAll($(this));TweenMax.to($(this).parent().children(".b1"),0.5,{attr:{r:16}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:120}});});$(".covid-beacon#"+country+" text").bind("mouseleave",function(){showAll($(this));TweenMax.to($(this).parent().children(".b1"),0.5,{attr:{r:8}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:0}});});$(".covid-beacon#"+country+" .b1").bind("mouseenter",function(){hideAll($(this).parent().children("text"));TweenMax.to($(this),0.5,{attr:{r:16}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:120}});});$(".covid-beacon#"+country+" .b1").bind("mouseleave",function(){showAll($(this).parent().children("text"));TweenMax.to($(this),0.5,{attr:{r:8}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:0}});});$(".covid-beacon#"+country+" text").bind("click",function(){window.scrollTo(0,680);$beacon_top_pos=$(this).parent().css("top").replace("px","");$beacon_left_pos=$(this).parent().css("left").replace("px","");$y_center=$(".destinations-map > div").height()/2.25;$x_center=$(".destinations-map > div").width()/2.75;$x=$x_center-$beacon_left_pos;$y=$y_center-$beacon_top_pos;$(".covid-beacon#"+country+" text").unbind("mouseenter");$(".covid-beacon#"+country+" text").unbind("mouseleave");$(".covid-beacon#"+country+" .b1").unbind("mouseenter");$(".covid-beacon#"+country+" .b1").unbind("mouseleave");var tl=new TimelineMax();tl.to($(this).prev(),0.3,{autoAlpha:0});tl.to($(this),0.3,{autoAlpha:0},"-=0.3");tl.to($(".b4"),0.2,{attr:{r:0}});tl.to($(".b1"),0.2,{autoAlpha:0});tl.to($(".ct-dropdown"),0.2,{autoAlpha:0},"-=0.2");tl.to($(".destinations-map > div > div"),1,{x:$x,y:$y});tl.to($(".destinations-map > div"),1,{scale:2},"-=1");if($(window).width()>480){tl.to($("#info_"+$(this).text().replace(" ","").toLowerCase()),1,{x:-160,ease:Power3.easeOut},"-=1");}
tl.set($(this).parent().children(".b1"),{attr:{r:0}});tl.to($(this).parent().children(".b1"),0.5,{attr:{r:9},autoAlpha:1});tl.to($(this).parent().children(".b2"),0.5,{attr:{r:22}},"-=0.5");tl.to($(this).parent().children(".b3"),0.5,{attr:{r:41}},"-=0.5");tl.to($(this).parent().children(".b4"),0.5,{attr:{r:60}},"-=0.5");type="text";pref=country;console.log(pref);$(".hideDetails").css("width","100%");});$(".covid-beacon#"+country+" .b1").bind("click",function(){window.scrollTo(0,680);$beacon_top_pos=$(this).parent().css("top").replace("px","");$beacon_left_pos=$(this).parent().css("left").replace("px","");$y_center=$(".destinations-map > div").height()/2.25;$x_center=$(".destinations-map > div").width()/2.75;$x=$x_center-$beacon_left_pos;$y=$y_center-$beacon_top_pos;$(".covid-beacon#"+country+" text").unbind("mouseenter");$(".covid-beacon#"+country+" text").unbind("mouseleave");$(".covid-beacon#"+country+" .b1").unbind("mouseenter");$(".covid-beacon#"+country+" .b1").unbind("mouseleave");var tl=new TimelineMax();tl.to($(this).next(),0.3,{autoAlpha:0});tl.to($(this).next().next(),0.3,{autoAlpha:0},"-=0.3");tl.to($(".b4"),0.2,{attr:{r:0}});tl.to($(".b1"),0.2,{autoAlpha:0});tl.to($(".ct-dropdown"),0.2,{autoAlpha:0},"-=0.2");tl.to($(".destinations-map > div > div"),1,{x:$x,y:$y});tl.to($(".destinations-map > div"),1,{scale:2},"-=1");if($(window).width()>480){tl.to($("#info_"+$(this).next().next().text().replace(" ","").toLowerCase()),1,{x:-160,ease:Power3.easeOut},"-=1");}
tl.set($(this).parent().children(".b1"),{attr:{r:0}});tl.to($(this).parent().children(".b1"),0.5,{attr:{r:9},autoAlpha:1});tl.to($(this).parent().children(".b2"),0.5,{attr:{r:22}},"-=0.5");tl.to($(this).parent().children(".b3"),0.5,{attr:{r:41}},"-=0.5");tl.to($(this).parent().children(".b4"),0.5,{attr:{r:60}},"-=0.5");type="dot";pref=country;console.log(pref);$(".hideDetails").css("width","100%");});}
function drawDetails(prefix,country){if($(window).width()<480){$border_class="mobile-border-details-inner";}else{$border_class="border-details";}
$html='<div class="'+$border_class+'" id="info_'+country.replace(" ","").toLowerCase()+'">';$html+='<div class="border-info">';$html+='<div class="border-title">'+country+' <a href="#" class="close-details" id="'+prefix+'"><div></div><div></div></a></div>';$html+='<div class="border-desc">';$html+='<h5>test</h5>';$html+='Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam.';$html+='<a class="btn-guide" href="#dest-'+country.replace(" ","").toLowerCase()+'">LEARN MORE</a>';$html+='</div>';$html+='</div>';$html+='</div>';if($(window).width()<480){$(".border-details-mobile").append($html);}else{$("body").append($html);}
$(".close-details#"+prefix).click(function(e){e.preventDefault();window.scrollTo(0,680);console.log(prefix);console.log(type);if(type=="dropdown"){if($(window).width()<=480){$(".mob-country-dropdown").show();$(".mobile-border-details-inner").hide();$(".border-details-mobile").css("max-height",0);}
var tl=new TimelineMax();tl.to($(".covid-beacon#"+prefix+" .b4"),0.5,{attr:{r:0}});tl.to($(".covid-beacon#"+prefix+" .b3"),0.5,{attr:{r:0}},"-=0.5");tl.to($(".covid-beacon#"+prefix+" .b2"),0.5,{attr:{r:0}},"-=0.5");if($(window).width()>480){tl.to($(".covid-beacon#"+prefix+" .b1"),0.5,{attr:{r:8},autoAlpha:0},"-=0.5");}
if($(window).width()>480){tl.to($("#info_"+country.replace(" ","").toLowerCase()),1,{x:550,y:680,ease:Power3.easeOut});}
tl.to($(".destinations-map > div"),1,{scale:1},"-=1");tl.to($(".destinations-map > div > div"),1,{x:0,y:0},"-=1");tl.to($(".b1"),0.2,{autoAlpha:1},"-=1");tl.to($(".covid-beacon .p1"),0.3,{autoAlpha:1});tl.to($(".covid-beacon text"),0.3,{autoAlpha:1},"-=0.3");tl.to($(".ct-dropdown"),0.3,{autoAlpha:1},"-=0.3");$(".destination-selected").attr("data-value","");$(".destination-selected").text("Select");$("#covid-destination").css("pointer-events","all");}
if(type=="text"||type=="dot"){var tl=new TimelineMax();tl.to($(".covid-beacon#"+prefix+" .b4"),0.5,{attr:{r:0}});tl.to($(".covid-beacon#"+prefix+" .b3"),0.5,{attr:{r:0}},"-=0.5");tl.to($(".covid-beacon#"+prefix+" .b2"),0.5,{attr:{r:0}},"-=0.5");tl.to($(".covid-beacon#"+prefix+" .b1"),0.5,{attr:{r:8},autoAlpha:0},"-=0.5");if($(window).width()>480){tl.to($("#info_"+country.replace(" ","").toLowerCase()),1,{x:550,y:680,ease:Power3.easeOut});}
tl.to($(".destinations-map > div"),1,{scale:1},"-=1");tl.to($(".destinations-map > div > div"),1,{x:0,y:0},"-=1");tl.to($(".b1"),0.2,{autoAlpha:1},"-=1");tl.to($(".covid-beacon .p1"),0.3,{autoAlpha:1,drawSVG:"100%"});tl.to($(".covid-beacon text"),0.3,{autoAlpha:1},"-=0.3");tl.to($(".ct-dropdown"),0.3,{autoAlpha:1},"-=0.3");}
$(".covid-beacon text, .covid-beacon .b1").css("pointer-events","all");$(".covid-beacon text").bind("mouseenter",function(){hideAll($(this));TweenMax.to($(this).parent().children(".b1"),0.5,{attr:{r:16}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:120}});});$(".covid-beacon text").bind("mouseleave",function(){showAll($(this));TweenMax.to($(this).parent().children(".b1"),0.5,{attr:{r:8}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:0}});});$(".covid-beacon .b1").bind("mouseenter",function(){hideAll($(this).parent().children("text"));TweenMax.to($(this),0.5,{attr:{r:16}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:120}});});$(".covid-beacon .b1").bind("mouseleave",function(){showAll($(this).parent().children("text"));TweenMax.to($(this),0.5,{attr:{r:8}});TweenMax.to($(this).parent().children(".b4"),0.5,{attr:{r:0}});});$(".hideDetails").css("width","0%");});}
function hideAll(exception){$(".covid-beacon text").each(function(){if($(this).context.textContent!==exception[0].textContent){TweenMax.to($(this),0.3,{autoAlpha:0});}});$(".covid-beacon .p1").each(function(){if($(this).next()[0].textContent!==exception[0].textContent){TweenMax.to($(this),1,{drawSVG:"0%"});}});}
function showAll(exception){$(".covid-beacon text").each(function(){if($(this).context.textContent!==exception[0].textContent){TweenMax.to($(this),0.3,{autoAlpha:1});}});$(".covid-beacon .p1").each(function(){if($(this).next()[0].textContent!==exception[0].textContent){TweenMax.to($(this),1,{drawSVG:"100%"});}});}});