let selectedCities=[];let selectedInstitutions=[];let selectedDiscipline=[];let selectedDuration=[];let currentFilters={keyword:'',intakes:[],countries:[],levels:[],disciplines:[],durations:[],cities:[],institutions:[],tuitionFees:0,applicationFee:0,driveOnly:false,page:1};jQuery(document).ready(function($){$(".course-page").find(".elementor-widget-wrap").addClass("course-page");function getCookie(name){const value=`; ${document.cookie}`;const parts=value.split(`; ${name}=`);if(parts.length===2)return parts.pop().split(';').shift();}
const userId=getCookie('authToken');var authToken=localStorage.getItem('authtokena');const apiHostUrl="https://app.adventus.io";function getApiEndpoint(endpoint){return`${apiHostUrl}${endpoint}`;}
getDefaultFilterValues();const params={searchOptions:{pagination:20,view:"institution",order:"relevance",keywords:"",seedId:"",previousPage:"",nationality:"Sri Lanka",residence:null},settings:{levels:null,institutions:[],disciplines:[],durations:[],tuition_fees:"",application_fee:"",advised_tat:"",prerequisites:[],grade_match:null,cities:[],education_levels:[],grading_system:null,intake_status:[{id:"open-intakes",name:"Open Intakes"}],nationality:[]},gradeMatchValues:{grading_system_id:null,grading_score:null},gradeMatchData:[]};function resetToDefaultView(){$('#random-search').val('');$('.toggle-switch input[type="checkbox"]').prop('checked',false);$('#sort-options').val('');$('.filter-checkbox').prop('checked',false);$('#levels').val('select');$('#tuition_fees').val(0);$('#application_fee').val(0);$('#intakes').val('');$('#destination_country').val('');selectedFilters=[];selectedDiscipline=[];selectedDuration=[];selectedCities=[];selectedInstitutions=[];currentFilters={keyword:'',intakes:[],countries:[],levels:[],disciplines:[],durations:[],cities:[],institutions:[],tuitionFees:0,applicationFee:0,driveOnly:false,page:1};updateSelectedFilters();getDefaultData(1);}
$('#selected-filters').hide();$('#sort-options').on('change',function(){const selectedOption=$(this).val();console.log('Sort options changed:',selectedOption);if(selectedOption===""||selectedOption==="clear"){console.log('Resetting to default view');resetToDefaultView();}else{console.log('Calling performSearch for sort');performSearch();}});$(document).ready(function($){const authToken=localStorage.getItem('authtokena');if(!authToken){console.error("No auth token found.");return;}
getDefaultData(1,10);});function getDefaultData(page=1,pagination=10){var apiendurl=getApiEndpoint("/api/website/search/course/results");$.ajax({url:apiendurl,type:'GET',contentType:'application/json',dataType:'json',headers:{Authorization:'Bearer '+authToken},data:{"searchOptions[pagination]":pagination,"searchOptions[page]":page,"searchOptions[view]":"institution","searchOptions[order]":"relevance","searchOptions[keywords]":"","searchOptions[seedId]":1727248626,"searchOptions[previousPage]":page>1?page-1:"","searchOptions[nationality]":"India","searchOptions[residence]":"","searchOptions[region][id]":1,"searchOptions[region][country_id]":107,"searchOptions[region][name]":"Maharashtra","searchOptions[region][status]":"Published","settings[levels]":"","settings[institutions]":"","settings[disciplines]":"","settings[durations]":"","settings[tuition_fees]":"","settings[application_fee]":"","settings[advised_tat]":"","settings[grade_match]":"","settings[cities]":"","settings[education_levels]":"","settings[value][id]":1,"settings[value][country_id]":107,"settings[value][name]":"Maharashtra","settings[value][status]":"Published"},success:function(response){var divhtml=generateCourseCards(response);$('#ccards').empty().html(divhtml);generateNearestCities(response);generateInstitutions(response);if(response.data&&response.data.count){generatePagination(response.data.count,page,pagination);}},error:function(xhr,status,error){console.error("Error fetching courses:",xhr.responseText||error);}});}
$('.search-dropdown').on('change',function(){currentFilters.levels=$('#levels').val()?[$('#levels').val()]:[];currentFilters.tuitionFees=$('#tuition_fees').val()||0;currentFilters.applicationFee=$('#application_fee').val()||0;currentFilters.page=1;performSearch();});$('#city-search-input').on('input',function(){const searchTerm=$(this).val().toLowerCase();filterCityCheckboxes(searchTerm);});$('#institution-search-input').on('input',function(){const searchTerm=$(this).val().toLowerCase();filterInstitutionCheckboxes(searchTerm);});$(document).on('change','.city-checkbox, .discipline-checkbox, .duration-checkbox, .institution-checkbox',function(){currentFilters.disciplines=$('.discipline-checkbox:checked').map(function(){return this.value;}).get();currentFilters.durations=$('.duration-checkbox:checked').map(function(){return this.value;}).get();currentFilters.cities=$('.city-checkbox:checked').map(function(){return this.value;}).get();currentFilters.institutions=$('.institution-checkbox:checked').map(function(){return this.value;}).get();console.log('Filter changed - Durations:',currentFilters.durations);console.log('Filter changed - Disciplines:',currentFilters.disciplines);currentFilters.page=1;performSearch();});let selectedFilters=[];function updateSelectedFilters(){toggleSelectedFilters();const filterValuesContainer=$('#filter-values');filterValuesContainer.empty();selectedFilters.forEach(filter=>{const filterHtml=`
                <span class="filter-chip">
                    ${filter.name} <span class="remove-filter" data-filter-id="${filter.id}">×</span>
                </span>
            `;filterValuesContainer.append(filterHtml);});}
function toggleSelectedFilters(){if(selectedFilters.length>0){$('#selected-filters').show();$('#search-params').show();}else{$('#selected-filters').hide();$('#search-params').hide();}}
function performSearch(){console.log('performSearch called, currentFilters:',currentFilters);const searchValue=$('#random-search').val()||'';const selectedOption=$('#sort-options').val()||'';const levels=currentFilters.levels.length?currentFilters.levels[0]:"";const institutions=currentFilters.institutions||[];const disciplines=currentFilters.disciplines||[];const durations=currentFilters.durations||[];const cities=currentFilters.cities||[];const tuition_fees=currentFilters.tuitionFees||"";const application_fee=currentFilters.applicationFee||"";const page=currentFilters.page||1;let intakes=[];if(currentFilters.intakes&&currentFilters.intakes.length>0){console.log('Processing intakes:',currentFilters.intakes);if(typeof currentFilters.intakes[0]==='object'&&currentFilters.intakes[0].id){intakes=currentFilters.intakes.map(item=>item.id);console.log('Extracted intake IDs:',intakes);}else{intakes=currentFilters.intakes;}}
let countries=[];if(currentFilters.countries&&currentFilters.countries.length>0){console.log('Processing countries:',currentFilters.countries);if(typeof currentFilters.countries[0]==='object'&&currentFilters.countries[0].id){countries=currentFilters.countries.map(item=>item.id);console.log('Extracted country IDs:',countries);}else{countries=currentFilters.countries;}}
const driveMembers=typeof isDriveToggleActive!=='undefined'&&isDriveToggleActive?true:'';const hasAnyFilter=(searchValue.trim()!==''||levels||institutions.length||disciplines.length||durations.length||cities.length||tuition_fees||application_fee||(driveMembers===true)||intakes.length||countries.length);console.log('hasAnyFilter check:',{searchValue:searchValue.trim()!=='',levels:!!levels,institutions:institutions.length,disciplines:disciplines.length,durations:durations.length,cities:cities.length,tuition_fees:!!tuition_fees,application_fee:!!application_fee,driveMembers:driveMembers===true,intakes:intakes.length,countries:countries.length,hasAnyFilter:hasAnyFilter});if(!hasAnyFilter&&!selectedOption){console.log('Using getDefaultData - no filters, page:',page);getDefaultData(page);return;}
console.log('Using getDataBySearchByKeyword - page:',page,'hasAnyFilter:',hasAnyFilter,'intakes:',intakes,'countries:',countries);getDataBySearchByKeyword(searchValue,intakes,countries,driveMembers,levels,institutions,disciplines,durations,tuition_fees,application_fee,cities,selectedOption,page);}
$('#levels').on('change',function(){const selectedLevel=$(this).val();if(selectedLevel){if(!selectedFilters.some(filter=>filter.id===selectedLevel)){selectedFilters.push({id:selectedLevel,name:selectedLevel,type:'level'});updateSelectedFilters();}}
currentFilters.levels=selectedLevel?[selectedLevel]:[];currentFilters.page=1;performSearch();});function addFilter(id,name,type){if(!selectedFilters.some(filter=>filter.id===id&&filter.type===type)){selectedFilters.push({id,name,type});updateSelectedFilters();}}
$('#tuition_fees').on('change',function(){const tuitionFee=$(this).val();if(tuitionFee>0){addFilter(tuitionFee,`$${tuitionFee}`,'tuition_fee');}
currentFilters.tuitionFees=tuitionFee||0;currentFilters.page=1;performSearch();});$('#application_fee').on('change',function(){const applicationFee=$(this).val();if(applicationFee>0){addFilter(applicationFee,`$${applicationFee}`,'application_fee');}
currentFilters.applicationFee=applicationFee||0;currentFilters.page=1;performSearch();});$(document).on('click','.remove-filter',function(){const filterIdToRemove=String($(this).data('filter-id'));const isTuitionFeeFilter=selectedFilters.some(filter=>filter.id===filterIdToRemove&&filter.type==='tuition_fee');const isApplicationFeeFilter=selectedFilters.some(filter=>filter.id===filterIdToRemove&&filter.type==='application_fee');const isLevelFilter=selectedFilters.some(filter=>filter.id===filterIdToRemove&&filter.type==='level');selectedFilters=selectedFilters.filter(filter=>filter.id!==filterIdToRemove);$('.filter-checkbox').each(function(){if($(this).val()===filterIdToRemove){$(this).prop('checked',false);}});if(isLevelFilter){$('#levels').val('select');}
if(isTuitionFeeFilter){$('#tuition_fees').val(0);}
if(isApplicationFeeFilter){$('#application_fee').val(0);}
updateSelectedFilters();});function getDataBySearchByKeyword(searchkeyword="",intakes=[],countries=[],driveMembers='',levels="",institutions=[],disciplines=[],durations=[],tuition_fees="",application_fee="",cities=[],selectedOption,page=1){if(driveMembers===null){driveMembers=isDriveToggleActive;}
const pageNum=page;var apiendurl=getApiEndpoint("/api/website/search/course/results");const requestData={"searchOptions[pagination]":10,"searchOptions[page]":pageNum,"searchOptions[view]":"institution","searchOptions[order]":selectedOption||"","searchOptions[keywords]":searchkeyword||"","searchOptions[seedId]":1727248626,"searchOptions[previousPage]":pageNum>1?(pageNum-1):"","searchOptions[nationality]":"India","searchOptions[residence]":"","searchOptions[region][id]":1,"searchOptions[region][country_id]":107,"searchOptions[region][name]":"Maharashtra","searchOptions[region][status]":"Published","settings[advised_tat]":"","settings[prerequisites]":"","settings[grade_match]":"","settings[education_levels]":"","settings[nationality]":"","settings[value][id]":1,"settings[value][country_id]":107,"settings[value][name]":"Maharashtra","settings[value][status]":"Published"};if(driveMembers!==''&&driveMembers!==null&&driveMembers!==undefined&&driveMembers!==false){requestData["searchOptions[driveMembers]"]=driveMembers;}
if(levels){requestData["settings[levels]"]=levels;}else{requestData["settings[levels]"]="";}
if(tuition_fees){requestData["settings[tuition_fees]"]=tuition_fees;}else{requestData["settings[tuition_fees]"]="";}
if(application_fee){requestData["settings[application_fee]"]=application_fee;}else{requestData["settings[application_fee]"]="";}
if(intakes&&intakes.length>0){intakes.forEach((intake,index)=>{requestData[`settings[intakes][${index}]`]=intake;});}else{requestData["settings[intakes]"]="";}
if(countries&&countries.length>0){countries.forEach((country,index)=>{requestData[`settings[countries][${index}]`]=country;});}else{requestData["settings[countries]"]="";}
if(institutions&&institutions.length>0){institutions.forEach((institution,index)=>{requestData[`settings[institutions][${index}]`]=institution;});}else{requestData["settings[institutions]"]="";}
if(disciplines&&disciplines.length>0){disciplines.forEach((discipline,index)=>{requestData[`settings[disciplines][${index}]`]=discipline;});}else{requestData["settings[disciplines]"]="";}
if(durations&&durations.length>0){console.log('Adding durations to API request:',durations);durations.forEach((duration,index)=>{requestData[`settings[durations][${index}]`]=duration;});}else{requestData["settings[durations]"]="";}
if(cities&&cities.length>0){cities.forEach((city,index)=>{requestData[`settings[cities][${index}]`]=city;});}else{requestData["settings[cities]"]="";}
console.log('Sending API request - Search keyword:',searchkeyword,'| Data:',requestData);console.log('Request URL will be:',apiendurl);$.ajax({url:apiendurl,type:'GET',contentType:'application/json',dataType:'json',headers:{Authorization:'Bearer '+authToken},data:requestData,success:function(response){console.log('API Response received:',response);if(response.data&&response.data.results&&response.data.results.data&&response.data.results.data.length>0){const firstCourse=response.data.results.data[0]._source;console.log('First course duration:',{course_duration:firstCourse.course_duration,course_duration_unit:firstCourse.course_duration_unit,full_duration:`${firstCourse.course_duration} ${firstCourse.course_duration_unit}`});}
var divhtml=generateCourseCards(response);$('#ccards').empty().html(divhtml);generateNearestCities(response);generateInstitutions(response);if(response.data&&response.data.count){var totalRecords=response.data.count;var totalRecordsMsg=`Showing ${totalRecords} courses`;$("#results-count").html(totalRecordsMsg);console.log('Updated results count:',totalRecords);generatePagination(response.data.count,pageNum,10);}else{console.warn('No count in response:',response);$("#results-count").html('Showing 0 courses');}},error:function(xhr,status,error){console.error('API Error Details:',{status:xhr.status,statusText:xhr.statusText,responseText:xhr.responseText,error:error});$('#ccards').empty();$('#ccards').html('<h2 align="center" style="color:red">Something went wrong, try again later.</h2>');$("#results-count").html('');}});}
$('#city-search-input').on('input',function(){const searchTerm=$(this).val().toLowerCase();filterCityCheckboxes(searchTerm);});$('#institution-search-input').on('input',function(){const searchTerm=$(this).val().toLowerCase();filterInstitutionCheckboxes(searchTerm);});function generateNearestCities(records){const appendCities=()=>{const $select=$('#city-checkbox-container');$select.empty();if(records.data&&records.data.nearestCities&&Array.isArray(records.data.nearestCities)){let count=0;const citiesToDisplay=[];records.data.nearestCities.forEach(city=>{const checkbox=`
                            <label>
                                <input type="checkbox" class="city-checkbox filter-checkbox" value="${city.key}"> ${city.key}
                            </label>
                        `;$select.append(checkbox);citiesToDisplay.push(city.key);});}else{console.error('No nearest cities found in the response.');}
$('.city-checkbox').each(function(){if(selectedCities.includes(this.value)){$(this).prop('checked',true);}});};const checkContainerAndAppend=()=>{const $select=$('#city-checkbox-container');if($select.length){appendCities();}else{console.warn('Cities container not found. Retrying...');setTimeout(checkContainerAndAppend,1000);}};setTimeout(checkContainerAndAppend,2000);}
function generateInstitutions(records){const appendInstitutions=()=>{const $select=$('#institution-checkbox-container');$select.empty();if(records.data&&records.data.institutionDetails&&Array.isArray(records.data.institutionDetails)){records.data.institutionDetails.forEach(institution=>{const checkbox=`
                        <label>
                            <input type="checkbox" class="institution-checkbox filter-checkbox" value="${institution.id}"> ${institution.name}
                        </label>
                    `;$select.append(checkbox);});}else{console.error('No institution details found in the response.');}
$('.institution-checkbox').each(function(){if(selectedInstitutions.includes(this.value)){$(this).prop('checked',true);}});};const checkContainerAndAppend=()=>{const $select=$('#institution-checkbox-container');if($select.length){appendInstitutions();}else{console.warn('Institutions container not found. Retrying...');setTimeout(checkContainerAndAppend,1000);}};setTimeout(checkContainerAndAppend,2000);}
function filterCityCheckboxes(searchTerm){$('#city-checkbox-container label').each(function(){const labelText=$(this).text().toLowerCase();if(labelText.includes(searchTerm)){$(this).show();}else{$(this).hide();}});}
function filterInstitutionCheckboxes(searchTerm){$('#institution-checkbox-container label').each(function(){const labelText=$(this).text().toLowerCase();if(labelText.includes(searchTerm)){$(this).show();}else{$(this).hide();}});}
function generateCourseCards(records){let resulthtml='';if(records.data&&records.data.results&&Array.isArray(records.data.results.data)&&records.data.results.data.length>0){var totalRecords=records.data.count;var totalRecordsMsg=`Showing ${totalRecords} courses`;$("#results-count").html(totalRecordsMsg);var hostUrl="https://adventus.io";var advicon;var advDriveIcon;var driveIcon;var applyIcon;var openInNewIcon;if(hostUrl==="http://adventus.website.com"){advicon="http://adventus.website.com/wp-content/plugins/open-course-sarch/img/group-4144.png";driveIcon="http://adventus.website.com/wp-content/plugins/open-course-sarch/img/drive.png";advDriveIcon="http://adventus.website.com/wp-content/plugins/open-course-sarch/img/drive-bg.png";applyIcon="http://adventus.website.com/wp-content/plugins/open-course-sarch/img/apply-icon.svg";openInNewIcon="http://adventus.website.com/wp-content/plugins/open-course-sarch/img/open_in_new.svg";}else{advicon="https://adventus.io/wp-content/plugins/open-course-sarch/img/group-4144.png";driveIcon="http://adventus.io/wp-content/plugins/open-course-sarch/img/drive.png";advDriveIcon="http://adventus.io/wp-content/plugins/open-course-sarch/img/drive-bg.png";applyIcon="http://adventus.io/wp-content/plugins/open-course-sarch/img/apply-icon.svg";openInNewIcon="http://adventus.io/wp-content/plugins/open-course-sarch/img/open_in_new.svg";}
for(let i=0;i<records.data.results.data.length;i++){const course=records.data.results.data[i];const isDriveMember=course._source.is_drive_member;let intakesHtmlContent='';const languageScoresId=`language-scores-container-${i}`;const intakesSectionId=`intakes-section-${i}`;const intakeOverlayId=`intake-overlay-${i}`;const courseIntakeList=processIntakes(course._source.intakes,course._source.course_attendance_pattern,{intakeLevels:[]});setTimeout(()=>{renderIntakeSection(intakesSectionId,courseIntakeList);},100);const permitType=getPermitType(course._source);let workPermitText='';let svgIconHtml='';if(course._source.institution_country?.toLowerCase()==='usa'||course._source.institution_country?.toLowerCase()==='united states'||course._source.institution_country?.toLowerCase()==='united states of america'||course._source.institution_country?.toLowerCase()==='us'){workPermitText=(course._source.cpt||course._source.opt)?'Yes':'-';}else if(course._source.institution_country?.toLowerCase()==='canada'){workPermitText=getCanadianWorkPermitText(course._source);}else{workPermitText=course._source.has_work_permit?'Yes':(course._source.work_permit_response==='no'?'No':'-');}
if(course._source.institution_country?.toLowerCase()==='canada'){if(course._source.has_work_permit&&course._source.work_permit_response==='yes'){svgIconHtml=`
                            <span class="check-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="16" viewBox="0 0 18 16" fill="none">
                                    <path d="M5.96008 6.99656L7.96645 8.99625L8.37657 9.40499L8.86035 9.88473L17.0381 1.73669" stroke="#179C43" stroke-width="1.8" stroke-miterlimit="10"/>
                                    <path d="M14.3564 4.40696C14.5627 4.73494 14.742 5.08005 14.8893 5.44229C15.2135 6.23286 15.3903 7.09442 15.3903 8.00003C15.3903 11.7399 12.3476 14.7725 8.59518 14.7725C4.84276 14.7725 1.80005 11.7399 1.80005 8.00003C1.80005 4.26011 4.84276 1.22754 8.59518 1.22754C9.95323 1.22754 11.218 1.62405 12.2788 2.30938" stroke="#179C43" stroke-width="1.8" stroke-miterlimit="10"/>
                                </svg>
                                ${course._source.work_permit_cip_code != "" ? `<span class="cip-code">CIP Code:${course._source.work_permit_cip_code}</span>` : ''}
                            </span>`;}else if(course._source.has_work_permit&&course._source.work_permit_response==='no'){svgIconHtml=`
                            <span class="not-check-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                                    <path d="M13.787 3.64237C11.0571 0.919178 6.57719 0.919178 3.84726 3.64237C1.11732 6.36556 1.11732 10.8344 3.84726 13.5576C6.57719 16.2808 10.9871 16.2808 13.717 13.5576C16.447 10.8344 16.517 6.36556 13.787 3.64237ZM10.7771 11.5326L8.81714 9.57753L6.85718 11.5326L5.87721 10.5551L7.83716 8.59998L5.87721 6.64486L6.85718 5.66731L8.81714 7.62242L10.7771 5.66731L11.7571 6.64486L9.79711 8.59998L11.7571 10.5551L10.7771 11.5326Z" fill="#E62E0C"/>
                                </svg>
                            </span>`;}}else{if(course._source.institution_country?.toLowerCase()==='usa'||course._source.institution_country?.toLowerCase()==='united states'||course._source.institution_country?.toLowerCase()==='united states of america'||course._source.institution_country?.toLowerCase()==='us'?(course._source.cpt||course._source.opt):course._source.has_work_permit){svgIconHtml=`
                            <span class="check-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="16" viewBox="0 0 18 16" fill="none">
                                    <path d="M5.96008 6.99656L7.96645 8.99625L8.37657 9.40499L8.86035 9.88473L17.0381 1.73669" stroke="#179C43" stroke-width="1.8" stroke-miterlimit="10"/>
                                    <path d="M14.3564 4.40696C14.5627 4.73494 14.742 5.08005 14.8893 5.44229C15.2135 6.23286 15.3903 7.09442 15.3903 8.00003C15.3903 11.7399 12.3476 14.7725 8.59518 14.7725C4.84276 14.7725 1.80005 11.7399 1.80005 8.00003C1.80005 4.26011 4.84276 1.22754 8.59518 1.22754C9.95323 1.22754 11.218 1.62405 12.2788 2.30938" stroke="#179C43" stroke-width="1.8" stroke-miterlimit="10"/>
                                </svg>
                            </span>`;}else if(course._source.has_work_permit&&course._source.work_permit_response==='no'){svgIconHtml=`
                            <span class="not-check-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="16" viewBox="0 0 18 16" fill="none">
                                    <path d="M5.96008 6.99656L7.96645 8.99625L8.37657 9.40499L8.86035 9.88473L17.0381 1.73669" stroke="#179C43" stroke-width="1.8" stroke-miterlimit="10"/>
                                    <path d="M14.3564 4.40696C14.5627 4.73494 14.742 5.08005 14.8893 5.44229C15.2135 6.23286 15.3903 7.09442 15.3903 8.00003C15.3903 11.7399 12.3476 14.7725 8.59518 14.7725C4.84276 14.7725 1.80005 11.7399 1.80005 8.00003C1.80005 4.26011 4.84276 1.22754 8.59518 1.22754C9.95323 1.22754 11.218 1.62405 12.2788 2.30938" stroke="#179C43" stroke-width="1.8" stroke-miterlimit="10"/>
                                </svg>
                            </span>`;}}
let iconHtml;if(isDriveMember){iconHtml=`
                        <div class="drive-icon-container">
                            <img src="${advDriveIcon}" alt="Drive Icon" class="drive-icon" />
                            <img src="${driveIcon}" alt="Drive Icon" class="drive-icon-inner" />
                        </div>
                    `;}else{iconHtml=`<img src="${advicon || 'default-icon-url'}" class="adv-icon" alt="Course Icon">`;}
const formattedLanguageScores=(()=>{const entryRequirements=course._source.entry_requirement||[];const languageRequirements=entryRequirements.filter(req=>req.type==="language");if(languageRequirements.length===0){return{isNull:true,visibleScores:[],hiddenScores:[],formatLabel:(type)=>type.toUpperCase().replace('_',' ')};}
const scoreTypes=['ielts_general','ielts_ukvi','ielts_academic','toefl','pte','duolingo','gre','gmat','sat'];const scores=scoreTypes.map(type=>{const scoreObj=languageRequirements.find(item=>item.meta?.find(m=>m[type]))?.meta?.find(m=>m[type]);return scoreObj?{type,score:scoreObj[type].overall_score?.score}:null;}).filter(Boolean).sort((a,b)=>b.score-a.score);const visibleScores=scores.slice(0,3);const hiddenScores=scores.slice(3);return{isNull:false,visibleScores,hiddenScores,formatLabel:(type)=>type.toUpperCase().replace('_',' ')};})();const languageTooltipContent=(()=>{const heading='<div class="language-tooltip-heading">Language Score</div>';const scores=formattedLanguageScores.hiddenScores.map(score=>`<div><span class="language-tooltip-label">${formattedLanguageScores.formatLabel(score.type)}</span> <span class="language-tooltip-score">${score.score}</span></div>`).join('');return`<div class="language-tooltip-content">${heading}<div class="language-tooltip-scores">${scores}</div></div>`;})();setTimeout(()=>{renderLanguageScores(languageScoresId,formattedLanguageScores,languageTooltipContent);},2000);resulthtml+=`
                    <div class="result">
                        <div class="course-card">
                            <div class="course-header">
                            <div class="search-result">
                                <div class="course-icon">
                                    ${iconHtml}
                                </div>
                                <div class="ctitle">${course._source.course_name || 'Course Name'}</div>
                            </div>
                                <div class="course-actions">
                                    <button class="apply-btn">
                                        <img src="${applyIcon || 'default-icon-url'}" alt="Apply Icon" />
                                        Apply
                                    </button>
                                </div>
                            </div>
                            <div class="course-body">
                                
                                

                                <div class="course-card__logo__section">
                                    <div class="course-card__logo__wrapper">
                                        <div class="course-card__logo__container">
                                            <img
                                                class="course-card__logo"
                                                src="${course._source.institution_logo ?
                        apiHostUrl + '/publicimages/' + course._source.institution_logo :
                        '/course_search/placeholder.svg'}"
                                                alt="${course._source.course_name || 'Course Name'}"
                                            />
                                        </div>
                                    </div>

                                    ${course._source.campus_image ? `<div class="course-card__uni-img__wrapper course-card__logo__animated"><div class="course-card__uni-img__container"><div class="img-gradient"></div><img
class="course-card__uni-img__logo"
src="${apiHostUrl}/publicimages/${course._source.campus_image}"
alt=""/></div></div>` : ''}
                                </div>

                                <div class="course-details">
                                    <p><strong>${course._source.institution_name || 'University Name'}</strong><br>Institution</p>
                                    <p><strong>${course._source.institution_country || 'Destination Location'}</strong><br>Destination</p>
                                    <p><strong>${course._source.course_duration || 'Duration'} ${course._source.course_duration_unit}</strong><br>Duration</p>
                                </div>
                                <div class="course-details">
                                    <p><strong>${course._source.cost_amount || 'Tuition Fee'} ${course._source.course_cost_currency}</strong><br>Tuition Fee</p>
                                    <p>
                                    <strong>${formatApplicationFee(course._source)}</strong><br>
                                    Application Fee
                                    </p>
                                    <p>
                                        <br>Intakes
                                        <div class="col-top">
                                            <div class="course-card__course-info__row">
                                                
                                                
                                                <div class="intakes-section" id="${intakesSectionId}" data-course-id="${i}"></div>
                                            </div>
                                        </div>
                                    </p>
                                </div>
                                <div class="course-details">
                                    <p><strong>${permitType}</strong></p>
                                    <p class="check-icon">${workPermitText} ${svgIconHtml}</p>
                                </div>
                                <div class="course-details">
                                    <p><strong>English Language Score</strong><br>
                                        <div class="col-top" id="${languageScoresId}">
                                            
                                        </div>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>`;}}else{let errorMsg='<div><h2 align="center" style="color:red">Courses not found.</h2></div>';return errorMsg;}
return resulthtml;}
function formatApplicationFee(course){const hasWaiver=course.app_fee_waiver;const fee=Math.round(course.application_fee);const currency=course.course_cost_currency;let html='';if(hasWaiver){html+=`<span class="strikeout" title="Application Fee against this application is waived off.">${currency} ${numberWithCommas(fee)}</span>`;html+=`<span class="waiver">★ APP FEE WAIVER</span>`;}else{html+=`${currency} ${numberWithCommas(fee)}`;}
return html;}
function numberWithCommas(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
function renderLanguageScores(containerId,formattedLanguageScores,languageTooltipContent){const container=document.getElementById(containerId);if(!container){console.error('Element with ID "language-scores-container" not found.');return;}
container.innerHTML='';const overlayId=`${containerId}-overlay`;let overlay=document.getElementById(overlayId);if(!overlay){overlay=document.createElement('div');overlay.id=overlayId;overlay.className='language-score-overlay';overlay.style.display='none';document.body.appendChild(overlay);}
if(formattedLanguageScores.isNull){container.innerHTML='-';}else{formattedLanguageScores.visibleScores.forEach((score,index)=>{const scoreHtml=`
                    <span class="eng-lbl">${formattedLanguageScores.formatLabel(score.type)}</span>
                    <span class="eng-score">${score.score}</span>
                `;container.innerHTML+=scoreHtml;if(index<formattedLanguageScores.visibleScores.length-1){container.innerHTML+=' | ';}});if(formattedLanguageScores.hiddenScores.length>0){const plusCount=document.createElement('span');plusCount.className='plus-count';plusCount.innerHTML=` | +${formattedLanguageScores.hiddenScores.length}`;container.appendChild(plusCount);plusCount.addEventListener('mouseover',(event)=>{overlay.innerHTML=languageTooltipContent;overlay.style.display='block';const rect=event.target.getBoundingClientRect();const viewportWidth=window.innerWidth;const overlayWidth=overlay.offsetWidth;const overlayHeight=overlay.offsetHeight;let leftPosition=rect.left+(rect.width/2)-(overlayWidth/2);leftPosition=Math.max(10,Math.min(leftPosition,viewportWidth-overlayWidth-10));let topPosition=rect.top-overlayHeight-10;if(topPosition<10){topPosition=rect.bottom+10;}
overlay.style.left=`${leftPosition}px`;overlay.style.top=`${topPosition}px`;overlay.style.setProperty('--arrow-left',`${rect.left + (rect.width / 2) - leftPosition}px`);});plusCount.addEventListener('mouseleave',()=>{overlay.style.display='none';});}}}
const languageScoreStyles=document.createElement('style');languageScoreStyles.textContent=`
    .language-score-overlay {
        position: fixed;
        z-index: 1000;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        padding: 10px;
        background-color: #293B4A;
        color: white;
    }
    
    .language-score-overlay::after {
        content: '';
        position: absolute;
        top: 100%;
        left: 50%;
        /* transform: translateX(-50%); */
        border-width: 8px;
        border-style: solid;
        border-color: #293B4A transparent transparent transparent;
    }
    
    .language-tooltip-content {
        min-width: 200px;
    }
    
    .language-tooltip-heading {
        font-weight: bold;
        margin-bottom: 8px;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .language-tooltip-scores {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }
    
    .language-tooltip-label {
        color: #B4B4B4;
        display: inline-block;
        min-width: 120px;
    }
    
    .language-tooltip-score {
        float: right;
        margin-left: 20px;
    }
    
    .plus-count {
        cursor: pointer;
        color: #0066cc;
    }
`;document.head.appendChild(languageScoreStyles);let currentIntakeList=[];let overlayStatus=false;const showOverlay=()=>{overlayStatus=true;document.querySelector('.intake-overlay').style.display='block';};const hideOverlay=()=>{overlayStatus=false;document.querySelector('.intake-overlay').style.display='none';};const setToolTip=(content)=>{if(content){return{content:content,allowHTML:true,appendTo:'parent',theme:'custom_tippy_theme',appendTo:()=>document.body,onShow(){showOverlay();},onHide(){hideOverlay();},};}};const getClosedIntakeIds=(status)=>{const closedIntakeIdList=new Set(status.intakeLevels.map((thisStatus)=>thisStatus.intakeId));return closedIntakeIdList;};const processIntakes=(intakes,courseAttendancePattern,allStatusByCourseId)=>{const currentDate=new Date();const closedIntakeIds=getClosedIntakeIds(allStatusByCourseId);if(courseAttendancePattern==='specified'&&intakes.length>0){let nextAllIntakes=intakes.filter(el=>(new Date(el.term_start).getTime()-currentDate.getTime())>0).map(i=>{return{...i,closed:closedIntakeIds.has(i.id)};}).sort((a,b)=>new Date(a.term_start)-new Date(b.term_start));setCurrentIntakeMonths(nextAllIntakes.slice(0,3));return nextAllIntakes;}else if(courseAttendancePattern==='recurring'){currentIntakeList=[{name:'Rolling Intake',tooltip:`<div class="tooltip-main-header">Rolling Intakes</div><div class="tooltip-body">Recurring intakes are when courses happen regularly, like weekly or monthly,allowing people to enroll frequently.</div>`,class:'intake-badge__rolling-intake'}];}else if(courseAttendancePattern==='self_paced'){currentIntakeList=[{name:'Begin Anytime',tooltip:`<div class="tooltip-main-header">Begin Anytime</div><div class="tooltip-body">This is a self-paced course, meaning students can enroll and start studying whenever they prefer.</div>`,class:'intake-badge__begin-anytime'}];}else{currentIntakeList=[{name:'Unavailable',tooltip:'',class:'intake-badge__default'}];}};const setCurrentIntakeMonths=(intakeList)=>{currentIntakeList=[];intakeList.forEach(element=>{let intakeObj={id:element.id,name:new Date(element.term_start).toLocaleString('default',{month:'short'}),tooltip:'',class:'intake-badge__default'};const currentDate=new Date();const twoDays=new Date(currentDate);const oneMonth=new Date(currentDate);twoDays.setDate(currentDate.getDate()+2);oneMonth.setMonth(currentDate.getMonth()+1);let termMonth=''
let termYear=''
const applicationClose=new Date(element.application_close);const applicationOpen=new Date(element.application_open);if(element.term_start){termMonth=new Date(element.term_start).toLocaleString('default',{month:'short'})
termYear=new Date(element.term_start).getFullYear()}
if(element.closed){intakeObj.class='intake-badge__closed_by_control';intakeObj.tooltip='';}else if(element.application_close){const applicationClose=new Date(element.application_close);const applicationOpen=new Date(element.application_open);const closeDate=`${applicationClose.getFullYear()}-${(applicationClose.getMonth() + 1).toString().padStart(2, '0')}-${applicationClose.getDate().toString().padStart(2, '0')}`;const closeTime=applicationClose.getTime();const openTime=applicationOpen.getTime();if(currentDate.getTime()>closeTime){intakeObj.class='intake-badge__closed';intakeObj.tooltip=`<div class="tooltip-main-header">Intake: ${termMonth} ${termYear}</div><div class="tooltip-sub-header">Application Closed</div><div class="tooltip-body">Application deadline is passed for this Intake</div>`}else if(currentDate<=closeTime&&oneMonth>closeTime&&currentDate>=openTime){intakeObj.class='intake-badge__soon';intakeObj.tooltip=element.closed?'':`<div class="tooltip-main-header">Intake: ${termMonth} ${termYear}</div><div class="tooltip-sub-header">Closing Soon</div><div class="tooltip-body">This intake is closing soon.Apply now!</div>`;}else{if(currentDate>=openTime){intakeObj.class='intake-badge__open';intakeObj.tooltip=element.closed?'':`<div class="tooltip-main-header">Intake: ${termMonth} ${termYear}</div><div class="tooltip-sub-header">Open</div><div class="tooltip-body">This intake is open to submit an application</div>`}else if(currentDate<openTime&&element.is_accept_early_application){intakeObj.class='intake-badge__open-soon';intakeObj.tooltip=element.closed?'':`<div class="tooltip-main-header">Intake: ${termMonth} ${termYear}</div><div class="tooltip-sub-header">Opening Soon</div><div class="tooltip-body">Application for this Intakes will be open by ${applicationOpen.toLocaleDateString('en-GB')}. You can still submit an application to Adventus.</div>`}else if(currentDate<openTime){intakeObj.class='intake-badge__other';intakeObj.tooltip=element.closed?'':`<div class="tooltip-main-header">Intake: ${termMonth} ${termYear}</div><div class="tooltip-sub-header">Not Yet Open</div><div class="tooltip-body">The applications are not yet opened for this Intake. You can submit an application after ${applicationOpen.toLocaleDateString('en-GB')}</div>`}}}
currentIntakeList.push(intakeObj);});};const renderIntakeSection=(sectionId,intakeList)=>{let activeIntakeTag=null;setTimeout(()=>{const intakesSection=document.getElementById(sectionId);if(!intakesSection){console.error(`Intakes section with ID "${sectionId}" not found.`);return;}
const overlayId=sectionId.replace('intakes-section','intake-overlay');let intakesHtmlContent='';if(currentIntakeList.length>0){currentIntakeList.forEach(item=>{intakesHtmlContent+=`<span class="intake-tag  ${item.class}" data-id="${item.id}">${item.name}</span><span class="intake-overlay"></span>&nbsp;`;});}
intakesSection.innerHTML=intakesHtmlContent;intakesSection.addEventListener('mouseover',(event)=>{if(event.target.classList.contains('intake-tag')){if(activeIntakeTag){const previousTooltipSpan=activeIntakeTag.nextElementSibling;if(previousTooltipSpan){previousTooltipSpan.style.display='none';}}
activeIntakeTag=event.target;const intakeId=event.target.getAttribute('data-id');const intake=currentIntakeList.find(i=>i.id==intakeId);if(intake){const tooltipContent=setToolTip(`${intake.tooltip}`);const tooltipSpan=activeIntakeTag.nextElementSibling;if(tooltipSpan){tooltipSpan.innerHTML=tooltipContent.content;tooltipSpan.style.display='block';tooltipSpan.style.left=`${activeIntakeTag.offsetLeft + 15}px`;tooltipSpan.style.top=`${activeIntakeTag.offsetTop - tooltipSpan.offsetHeight - 10}px`;}}}});function updateOverlayPosition(activeIntakeTag,overlay){const rect=activeIntakeTag.getBoundingClientRect();const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;const overlayWidth=overlay.offsetWidth;let leftPosition=rect.left+(rect.width/2)-(overlayWidth/2);leftPosition=Math.max(10,Math.min(leftPosition,viewportWidth-overlayWidth-10));const overlayHeight=overlay.offsetHeight;let topPosition=rect.top-overlayHeight-10;if(topPosition<10){topPosition=rect.bottom+10;}}
intakesSection.addEventListener('mouseleave',()=>{const tooltipSpan=activeIntakeTag?activeIntakeTag.nextElementSibling:null;if(tooltipSpan){tooltipSpan.style.display='none';}});},2000);};$('#random-search').on('input',function(){const searchValue=$(this).val();if(searchValue.trim()===''){resetToDefaultView();}else{currentFilters.keyword=searchValue;currentFilters.page=1;performSearch();}});function getDefaultFilterValues(){var apiendurl=getApiEndpoint("/api/website/course-search/initial-details");$.ajax({url:apiendurl,type:'GET',contentType:'application/json',dataType:'json',headers:{Authorization:'Bearer '+authToken},success:function(response){$('#institution-checkbox-container').empty();$('#disciplines-container').empty();$('#durations-container').empty();$('#city-checkbox-container').empty();const $selectIntakes=$('#intakes');const $selectDestination=$('#destination_country');const $country=$('#country');const $disciplines=$('#disciplines');const $durations=$('#duration');const $levels=$('#levels');$selectIntakes.empty();$selectDestination.empty();$country.empty();$selectIntakes.append('<option value="">SELECT INTAKES</option>');$selectDestination.append('<option value="">SELECT DESTINATION COUNTRY</option>');response.data.filters.intakes.forEach(intake=>{const option=`<option value="${intake.id}">${intake.name}</option>`;$selectIntakes.append(option);});response.data.filters.countries.forEach(destination=>{const option2=`<option value="${destination.id}">${destination.name}</option>`;$selectDestination.append(option2);});response.data.filters.countries.forEach(destination=>{const option3=`<option value="${destination.id}">${destination.name}</option>`;$country.append(option3);});response.data.filters.levels.forEach(level=>{const option6=`<option class="filter-dropdown filter-checkbox" value="${level}">${level}</option>`;$levels.append(option6);});response.data.filters.disciplines.forEach(discipline=>{const checkbox=`
                        <label>
                            <input type="checkbox" class="discipline-checkbox filter-checkbox search-dropdown" value="${discipline.name}"> ${discipline.name}
                        </label>
                    `;$('#disciplines-container').append(checkbox);});response.data.filters.durations.forEach(duration=>{const checkbox=`
                        <label>
                            <input type="checkbox" class="duration-checkbox filter-checkbox search-dropdown" value="${duration.id}"> ${duration.name}
                        </label>
                    `;$('#durations-container').append(checkbox);});},error:function(xhr,status,error){console.error('Error:',error);}});}
$(document).on('click','#search_by_intake_destination',function(event){event.preventDefault();event.stopPropagation();console.log('Search button clicked');let allSelected=true;let selectedValues={};let allValid=true;$('.mandatory').each(function(){const value=$(this).val();const tooltip=$(this).siblings('.tooltip');if(value===""){allValid=false;$(this).addClass('error');tooltip.text('This field is required!').show();}else{$(this).removeClass('error');tooltip.hide();}});if(allValid){var intakeValue=$("#intakes").val();var intakeName=$("#intakes option:selected").text();var intakes=[{"id":intakeValue,"name":intakeName}];var destinationValue=$("#destination_country").val();var destinationName=$("#destination_country option:selected").text();var countries=[{"id":destinationValue,"name":destinationName}];console.log('Setting filters - Intakes:',intakes,'Countries:',countries);currentFilters.intakes=intakes;currentFilters.countries=countries;currentFilters.page=1;console.log('Calling performSearch with currentFilters:',currentFilters);performSearch();}else{console.log('Validation failed - allValid:',allValid);}});function convertDateToMonthYear(dateString){const date=new Date(dateString);const options={month:'short',year:'2-digit'};const formattedDate=date.toLocaleDateString('en-US',options);return formattedDate;}
function generatePagination(totalCount,currentPage=1,pageSize=10){const totalPages=Math.ceil(totalCount/pageSize);const paginationContainer=$('.pagination');if(totalPages<=1){paginationContainer.hide();return;}
paginationContainer.show();paginationContainer.empty();paginationContainer.append('<div class="pagination-arrow prev">←</div>');const maxVisiblePages=5;let startPage=Math.max(1,currentPage-Math.floor(maxVisiblePages/2));let endPage=Math.min(totalPages,startPage+maxVisiblePages-1);if(endPage-startPage+1<maxVisiblePages){startPage=Math.max(1,endPage-maxVisiblePages+1);}
if(startPage>1){paginationContainer.append('<div class="pagination-number">1</div>');if(startPage>2){paginationContainer.append('<div class="pagination-dots">...</div>');}}
for(let i=startPage;i<=endPage;i++){const pageClass=i===currentPage?'pagination-number active':'pagination-number';paginationContainer.append(`<div class="${pageClass}">${i}</div>`);}
if(endPage<totalPages){if(endPage<totalPages-1){paginationContainer.append('<div class="pagination-dots">...</div>');}
paginationContainer.append(`<div class="pagination-number">${totalPages}</div>`);}
paginationContainer.append('<div class="pagination-arrow next">→</div>');}
$(document).on('click','.pagination-number',function(){const pageText=$(this).text().trim();const pageNum=parseInt(pageText,10);if(!isNaN(pageNum)){console.log('Pagination clicked - Page:',pageNum,'Current filters:',currentFilters);currentFilters.page=pageNum;performSearch();$('html, body').animate({scrollTop:0},'slow');}});$(document).on('click','.pagination-arrow.prev',function(){const nextPage=Math.max(1,(currentFilters.page||1)-1);if(nextPage!==currentFilters.page){currentFilters.page=nextPage;performSearch();}
$('html, body').animate({scrollTop:0},'slow');});$(document).on('click','.pagination-arrow.next',function(){const nextPage=(currentFilters.page||1)+1;currentFilters.page=nextPage;performSearch();$('html, body').animate({scrollTop:0},'slow');});$(document).on('click','.apply-btn',function(){$('html, body').animate({scrollTop:0},'slow',function(){$('#popupModal').show();$('#mainModalContainer').hide();$('#thankYouMessage').hide();$('#studentForm').show();});});$(document).on('click','#studentBtn',function(){$('#mainModalContainer').hide();$('#studentForm').show();$('#studentForm')[0].reset();});$(document).on('click','.close-btn',function(){$('#studentForm').hide();$('#popupModal').hide();});$(document).on('click','#recruiterBtn',function(){window.open('https://app.adventusstage.com/','_blank');});$(document).on('click','#studentBtn',function(){$('#mainModalContainer').hide();$('#studentForm').show();});$(document).on("submit","#userForm",function(event){event.preventDefault();strCountry=$('#country').val();let countryId=strCountry.split('-')[1];var formData=new FormData();formData.append("first_name",$('#name').val());formData.append("last_name",$('#name').val());formData.append("email_id",$('#email').val());formData.append("mobile_number",$('#mobile').val());formData.append("country_id",countryId);formData.append("course_id",100);formData.append("region",$('#region').val());formData.append("city",$('#city').val());var apiendurl=getApiEndpoint("/api/website/leads");$.ajax({url:apiendurl,type:'POST',contentType:false,processData:false,dataType:'json',headers:{Authorization:'Bearer '+authToken},mimeType:"multipart/form-data",data:formData,success:function(response){$('#studentForm').hide();$('#thankYouMessage').show();},error:function(xhr,status,error){console.error('Error:',error);}});});function postLead(formData){var apiendurl=getApiEndpoint("/api/website/leads");$.ajax({url:apiendurl,type:'POST',contentType:false,dataType:'json',headers:{Authorization:'Bearer '+authToken},mimeType:"multipart/form-data",data:formData,success:function(response){$('#studentForm').hide();$('#thankYouMessage').show();},error:function(xhr,status,error){console.error('Error:',error);}});}
$(window).scroll(function(){if($(window).scrollTop()+$(window).height()==$(document).height()){}});$(document).on('click','.clear-btn',function(){$('.filter-checkbox').prop('checked',false);$('#levels').val('select');$('#tuition_fees').val(0);$('#application_fee').val(0);$('#intakes').val('');$('#destination_country').val('');selectedFilters=[];updateSelectedFilters();selectedDiscipline=[];selectedDuration=[];selectedCities=[];selectedInstitutions=[];currentFilters.intakes=[];currentFilters.countries=[];currentFilters.levels=[];currentFilters.disciplines=[];currentFilters.durations=[];currentFilters.cities=[];currentFilters.institutions=[];currentFilters.tuitionFees=0;currentFilters.applicationFee=0;currentFilters.page=1;performSearch();});$('#reset_filters').on('click',function(){$('#intakes').val('');$('#destination_country').val('');$('.filter-checkbox').prop('checked',false);$('#sort_by').val('Clear');resetToDefaultView();});let isDriveToggleActive=false;$('.toggle-switch input[type="checkbox"]').on('change',function(){isDriveToggleActive=$(this).is(':checked');const searchValue=$('#random-search').val();if(searchValue.trim()===''){if(isDriveToggleActive){performSearch();}else{performSearch();}}else{performSearch();}});$('.toggle-switch input[type="checkbox"]').on('change',function(){const isChecked=$(this).is(':checked');const driveMembers=isChecked?true:'';performSearch();});function getCanadianWorkPermitText(course){if(!course.has_work_permit)return'-';if(course.work_permit_response==='response_awaited')return'Response Awaited';return course.work_permit_response==='yes'?'Yes':course.work_permit_response==='no'?'No':'-';}
function getPermitType(course){const country=course.institution_country?.toLowerCase();const hasCPT=course.cpt;const hasOPT=course.opt;if(country==='usa'||country==='united states'||country==='united states of america'||country==='us'){if(hasCPT&&hasOPT)return'CPT/OPT';if(hasCPT)return'CPT';if(hasOPT)return'OPT';return'Post Study Work Permit';}
switch(country){case'canada':return'Post-Graduate Work Permit';case'new zealand':case'uk':case'united kingdom (inc channel islands and isle of man)':case'united kingdom':return'Post Study Work Visa';case'australia':return'Post Study Work Rights';case'germany':return'Job Seeker Visa';default:return'Post Study Work Permit';}}});